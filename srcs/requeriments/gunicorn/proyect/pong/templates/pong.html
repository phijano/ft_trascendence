<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	{% load static %}
	<link rel="stylesheet" href="{% static 'home/pong/pong.css' %}">
</head>
<body>
	<script>
		console.log('carecarpincho');
	</script>
{% if user.is_authenticated %}
	{% csrf_token %}
	<input hidden id="hNick" value="{{profile}}">
	<input hidden id="hProfileId" value="{{profile.id}}">
{% else %}
	<input hidden id="hNick" value="">
{% endif %}
	<div class="container-pong">
		<div class="row">
			<div class="col text-start">
				<button id="bRules" type="button" class="orbitron-font" onclick="pongToggleRules()" onmouseover="pongSetRules()">Rules</button>
			</div>
			<div class="slider-container">
				<div class="slider">
					<div class="ball" id="ball-pong"></div>
				</div>
			</div>
			<div class="col"></div>
		</div>
		<div hidden id="dSidePanel" class="sidepanel">
			<div id="dSidePanelContent" class="sideContent rationale-font">
				Press "W" to move up, "S" to move down as the left player, and "D" to activate the Freeze Flip power-up.<br>
				Press "Up Arrow" to move up, "Down Arrow" to move down as the right player, and "Left Arrow" to activate the Freeze Flip power-up.<br>
				The power-up can only be used once per round, which resets after each goal is scored.
			</div>
		</div>
	</div>
		<div id="dStartOptions">
			<button id="bLocalGame" type="button" class="pong-button" onclick="pongStartLocal(); pongMoveball('left')">Local Game</button>
			{% if user.is_authenticated %}
				<button id="bRemoteGame" type="button" class="pong-button" onclick="pongStartRemote(); pongMoveball('center_1')">Remote Game</button>
			{% else %}
				<button id="bRemoteGame" type="button" class="pong-button" hidden>Remote Game</button>	
			{% endif %}
			<button id="bTournament" type="button" class="pong-button" onclick="pongStartTournamentMode(); pongMoveball('center')">Tournament</button>	
			<button id="bSettings" type="button" class="pong-button" onclick="pongShowCustomizationOptions(); pongMoveball('right')">Settings</button>
		</div>
		<div hidden id="dEndTournament">
			<button type="button" class="pong-button" onclick="pongEndTournament()">End Tournament</button>
		</div>
	<div class="container" id="dLocalSettings" hidden>
			<div id="sOpponentContainer">
				<div class="option" data-value="0" onclick="pongSelectOption(this)">Player Vs Player</div>
				<div class="option" data-value="1" onclick="pongSelectOption(this)">Player Vs AI</div>
			</div>
			<select id="sOpponent" onchange="pongSetOpponent()" style="display: none;">
				<option value="0" selected> Player Vs Player </option>
				<option value="1"> Player Vs AI </option>
			</select>
			<select id="sDifficulty" onchange="pongSetDifficulty()" style="visibility: hidden">
				<option value="0"> Easy </option>
				<option value="1" selected> Medium </option>
				<option value="2"> Hard </option>
				<option value="3"> Impossible </option>
			</select>
	</div>
	<div class="container mt-4" id="dRemoteSettings" hidden>
			<button id="bCreateRemote" type="button" onclick="pongCreateGame()">Create game</button>
			<button id="bJoinRemote" type="button" onclick="pongJoinGame()">Join game</button>
	</div>
	<div class="bg-info container" id="dTournamentSettings" hidden>
		<h4 class="p-4 text-white">CREATE TOURNAMENT</h4>
			<select id="sNumPlayers" name="selectPlayers" onchange="pongSelectNumPlayers()">
				<option value="4" selected> 4 Players </option>
				<option value="8"> 8 Players </option>
				<option value="16"> 16 Players </option>
			</select>
		<div class="d-inline-flex flex-column">
			<div class="d-inline-flex flex-row">
				<div class="d-flex-column p-3 align-self-center">
					<div class="d-inline-flex flex-row">
						<div class="px-3">
							<input id="iNick" class ="border-3" type="text" minlength="3" maxlength="12" placeholder="Enter nick">
						</div>
						<div class="px-3">
							<button id="bRegisterPlayer" type="button" onclick="pongAddPlayer()"> Add Player >> </button>
						</div>
					</div>
					<div class="px-3 m-2 d-flex justify-content-start">
						<label id="lNickWarning" class="bg-white text-danger">Nick too short</label>
					</div>
				</div>
				<div>
					<textarea class="border-3" id="tPlayers" cols="20" rows="16" readonly style="resize: none"></textarea>
				</div>
			</div>
			<div class="p-3">
				<button id="bCreate" style="visibility: hidden" type="button" onclick="pongStartTournament()">Start Tournament</button>
			</div>
		</div>
	</div>
	<!-- Game Customization Menu -->
    <div hidden id="dCustomizationOptions">
		<h2>Game Customization</h2>
		<form id="customizationForm">
			<div class="container py-3">
				<div class="row py-3">
					<div class="col-sm"></div>
					<div class="col-sm text-start">
						<label for="playerSize">Paddle Size:</label>
					</div>
					<div class="col-sm text-start">
						<select id="playerSize">
							<option value=30>Small</option>
							<option value=50 selected>Normal</option>
							<option value=70>Big</option>
						</select>
					</div>
					<div class="col-sm text-start">
						<label for="ballSpeed">Ball Start Speed:</label>
					</div>
					<div class="col-sm text-start">
						<select id="ballSpeed">
							<option value=6>Slow</option>
							<option value=7.5 selected>Normal</option>
							<option value=10>Fast</option>
						</select>
					</div>
					<div class="col-sm"></div>
				</div>  
				<div class="row py-3">
					<div class="col-sm"></div>
					<div class="col-sm text-start">
						<label for="playerSpeed">Paddle Speed:</label>
					</div>
					<div class="col-sm text-start">
						<select id="playerSpeed">
							<option value=3>Slow</option>
							<option value=5 selected>Normal</option>
							<option value=7>Fast</option>
						</select>
					</div>
					<div class="col-sm text-start">
						<label for="ballSpeedUp">Ball speed up:</label>
					</div>
					<div class="col-sm text-start">
						<select id="ballSpeedUp">
							<option value=1>None</option>
							<option value=1.02 selected>Normal (2%)</option>
							<option value=1.05>Fast (5%)</option>
						</select>
					</div>
					<div class="col-sm"></div>
				</div>
				<div class="row py-3">
					<div class="col-sm"></div>
					<div class="col-sm text-start">
						<label for="pointsToWin">Points to win:</label>
					</div>
					<div class="col-sm text-start">
						<select id="pointsToWin">
							<option value=1>1</option>
							<option value=3 selected>3</option>
							<option value=5>5</option>
							<option value=10>10</option>
						</select>
					</div>
					<div class="col-sm text-start">
						<label for="ballSize">Ball size:</label>
					</div>
					<div class="col-sm text-start">
						<select id="ballSize">
							<option value=8>Small</option>
							<option value=10 selected>Normal</option>
							<option value=13>Big</option>
						</select>
					</div>
					<div class="col-sm"></div>
				</div>
				<div class="row py-3">
					<div class="col-sm"></div>
					<div class="col-sm text-start">
						<label for="boardSize">Board size:</label>
					</div>
					<div class="col-sm text-start">
						<select id="boardSize">
							<option value="small">Small</option>
							<option value="normal" selected>Normal</option>
							<option value="big">Big</option>
						</select>
					</div>
					<div class="col-sm text-start">
						<label for="allowFreezeFlip">Allow Freeze Flip power up:</label>
					</div>
					<div class="col-sm text-start">
						<input type="checkbox" id="allowFreezeFlip" />
					</div>
					<div class="col-sm"></div>
				</div>
			</div>
		</form>
	</div>			
		<div class="mt-4" hidden id="dMatchPlayers">
			<div class="d-inline-flex flex-row align-self-center">
				<div class="">
					<h4><label class="bg-info" style="display:block;width:300px" id="lLeftPlayer">???</label></h4>
				</div>
				<div class="">
					<h4><label style="display:block;width:50px" id="lVs"> VS </label></h4>
				</div>
				<div class="">
					<h4><label class="bg-info" style="display:block;width:300px" id="lRightPlayer">???</label></h4>
				</div>
			</div>
		</div>
		<div class="mt-4" hidden id="dWinner">
			<div class="d-inline-flex flex-row align-self-center">
					<h4 class="bg-info">&nbspWINNER&nbsp<label  id="lWinner"></label>&nbsp</h4>
			</div>
		</div>
		<div class="mt-5" hidden id="dChampion">
			<div class="d-inline-flex flex-row align-self-center">
				<div>
					<h4 class="bg-info">&nbspCHAMPION&nbsp<label  id="lChampion"></label>&nbsp</h4>
				</div>
			</div>
		</div>

	<canvas id="board" style="visibility: hidden;" height="500" width="700"></canvas>
	<div class="p-3" hidden id="dGameMessage">
		<label class="text-danger" id="lGameMessage"></label>
	</div>
	<div class="p-3" hidden id="dStartGame">
		<button type="button" onclick="pongStartPong()"> Start !! </button>
	</div>
	<div class="p-3" hidden id="dAdvance">
		<button type="button" onclick="pongAdvance()"> Next Match </button>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
